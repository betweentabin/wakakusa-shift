# Xserver用 .htaccess設定
# Django アプリケーション用

# Python CGI設定
AddHandler cgi-script .py
Options +ExecCGI

# 静的ファイルの配信設定
<IfModule mod_alias.c>
    Alias /static/ /home/your-account/your-domain.com/public_html/staticfiles/
    Alias /media/ /home/your-account/your-domain.com/public_html/media/
</IfModule>

# 静的ファイルディレクトリの設定
<Directory "/home/your-account/your-domain.com/public_html/staticfiles/">
    Require all granted
</Directory>

<Directory "/home/your-account/your-domain.com/public_html/media/">
    Require all granted
</Directory>

# Django アプリケーションへのリダイレクト
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/static/
RewriteCond %{REQUEST_URI} !^/media/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /cgi-bin/django.cgi/$1 [QSA,L]

# セキュリティ設定
<Files "*.py">
    Require all denied
</Files>

<Files "django.cgi">
    Require all granted
</Files>

# キャッシュ設定
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/svg+xml "access plus 1 month"
</IfModule>

# Gzip圧縮
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
</IfModule> 